In a fantasy kingdom, all magic is regulated by the Secret Magic Control Agency (S.M.C.A.). One day, the king is abducted by sentient food enchanted with black magic. To keep the rest of the kingdom calm, the prime minister agrees to keep the abduction confidential and have the S.M.C.A. investigate. The S.M.C.A. appoints agent Gretel with her disowned brother and con artist Hansel, who the agency believes could contribute with his knowledge and abilities to track down the king.

The siblings identify a local pastry shop with a pantry that has sentient baked goods. Gretel discovers a potion room in the pantry, which includes a beaker of enchanted vanilla extract. Hansel and Gretel are turned into children after a chase with a dog-shaped cookie destroys the building. Unable to get help from the S.M.C.A. as no one believes that the children are Hansel and Gretel, they seek the assistance of Baba Yaga, a witch rumored to eat children. They learn that the enchanted vanilla extract came from the swamplands.

After escaping from Baba Yaga's, the siblings make their way to the swamplands, where mermaids live. However, the Lake Witch mistakes them for spies for Ilvira, the witch of the gingerbread house and former chef of the king. They are spared from being turned into fish when her daughter recognizes Gretel as the one who saved her from a previous incident. Hansel and Gretel discover that the mermaids have imprisoned some of Ilvira's goons. Gretel frees the goons who lead them to Ilvira's lair and the king's whereabouts. The spies learn Ilvira's intent was to make the sovereign and the whole kingdom fall in love with magic to become queen and gain the magical power imbued in the noble title itself. She captures the siblings and imprisons them in an oven.

Hansel and Gretel argue with each other: Gretel is disappointed in her brother's occupation as a con artist while Hansel is saddened that Gretel prioritized her career as an agent over her own family. Hansel reveals to Gretel that while their parents did advocate for their children to be honest, their jobs as agents for the S.M.C.A. were not enough to fund Gretel's education and that Hansel had given up his chance at an honest life to pay for Gretel's tuition, which he told Gretel was a scholarship from the king. They both reconcile and escape the oven.

The siblings prepare an antidote and go to the wedding. Gretel gives the antidote to the king, but the marriage is sealed before they can stop Ilvira. Before Gretel can pour the antidote into Ilvira's cookie-making machine, Ilvira takes the antidote back and shoves the children into the batter to be baked into cookies. Using an S.M.C.A. gadget Hansel stole from the agency earlier, Hansel and Gretel escape, get the antidote back, and drop Ilvira into the cookie batter.

Having saved the king and the kingdom from Ilvira, Gretel is awarded the title of "Best Agent" by the S.M.C.A. and Hansel is given an official license to perform magic, which he declines since he is incapable of using real magic. Gretel decides to work with her brother on all her future assignments.

