In 1891, Irene Adler delivers a package to Dr. Hoffmanstahl, payment for completing a recent surgery, while Hoffmanstahl hands Adler a letter. Hoffmanstahl opens the package, triggering a bomb that is prevented from detonating by Sherlock Holmes, who takes the letter while Adler and Hoffmanstahl escape. Hoffmanstahl is assassinated by Sebastian Moran, henchman to Professor Moriarty, who deeming Adler compromised, poisons and kills her. 

Holmes discloses to Dr. John Watson at 221B Baker Street that he is investigating seemingly unrelated murders, terrorist attacks and business acquisitions that he has connected to Moriarty. After meeting with his brother Mycroft at Watson's bachelor party, Holmes meets with Romani fortune-teller Madame Simza, the intended recipient of the letter he took from Adler, sent by her brother René. Holmes defeats an assassin sent to kill Simza and she departs. After the wedding of Watson and Mary Morstan, Holmes meets Moriarty for the first time. Moriarty taunts Holmes about murdering Adler, and threatens to kill Watson and Mary due to Holmes' interference. Holmes vows to defeat him. 

Moriarty's men attack Watson and Mary on a train to their honeymoon in Brighton. Holmes throws Mary from the train into a river, where she is rescued by Mycroft. After defeating Moriarty's men, Holmes and Watson travel to Paris and locate Simza. Holmes tells Simza that she has been targeted because René is working for Moriarty and may have told her his plans. Simza takes the pair to the headquarters of an anarchist group to which she and René belonged; the anarchists have been forced to plant bombs for Moriarty. The trio follow Holmes' deduction that the bomb is in the Paris Opera. However, the bomb is in a nearby hotel; its explosion kills a number of businessmen. The bomb was a cover for the assassination of Alfred Meinhard by Moran. 

Meinhard's death grants Moriarty ownership of Meinhard's arms factory in Heilbronn, German Empire. Holmes spies on Moriarty, learning he is travelling to Germany. The trio follow him there. At the factory, Moriarty captures, interrogates and tortures Holmes while Watson fights Moran. Holmes spells out Moriarty's plot, revealing that the Professor acquired shares in multiple war profiteering companies and intends to instigate a major world war to make himself a fortune. Watson uses the cannon he was hiding behind to destroy the watchtower in which Moran is concealed. The structure collapses into the warehouse where Moriarty is holding Holmes captive. Watson, Simza and Holmes escape and Holmes deduces that Moriarty's final target will be a peace summit in Switzerland, creating an international incident. At the summit, Holmes deduces that René is the assassin and is disguised as one of the ambassadors, having been given radical reconstructive surgery by Hoffmanstahl. 

Holmes and Moriarty meet on a balcony to discuss their plans over a game of chess. Watson and Simza stop René's assassination attempt; René is killed by Moran, who flees. Despite his war being averted, Moriarty remains confident in his victory, warning Holmes that the nations of Europe will inevitably go to war with one another regardless of Moriarty's manipulations. Holmes reveals that, while being tortured by Moriarty, he replaced the professor's personal diary that contained his plans and financing with a duplicate. The original was sent to Mary, who decrypted the code using a book Holmes had noticed in Moriarty's office, before passing the information to Inspector Lestrade, who seizes Moriarty's assets and donates his fortune to charities that help war widows and orphans. Holmes and Moriarty anticipate a fight, and both realise that Moriarty will win due to Holmes' injured shoulder. Out of options and with Moriarty vowing to kill Watson and Mary, Holmes grabs Moriarty and lunges backwards over the balcony, just as Watson shows up, and into the Reichenbach Falls below, to their deaths.

Following Holmes's funeral, Watson and Mary prepare to have their belated honeymoon when Watson receives a package containing a breathing device of Mycroft's that Holmes expressed a liking for before the summit. Realising that Holmes may still be alive, Watson leaves his office to find the delivery man. Holmes, having concealed himself in Watson's office, reads Watson's memoirs on the typewriter and adds a question mark after the words "The End".

