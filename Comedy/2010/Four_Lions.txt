A group of four radicalised British Muslim men living in Sheffield, three of whom are British Pakistani, aspire to become suicide bombers. They are Omar (Riz Ahmed), who is deeply critical of Western society and interventionism; his
dim-witted and anxious cousin Waj (Kayvan Novak); Barry (Nigel Lindsay), a bad-tempered and extremely rash English convert to Islam; and the naive Faisal (Adeel Akhtar), who tries to train crows to be used as bombers. While Omar and Waj travel to an al Qaeda-affiliated training camp in Pakistan, Barry recruits a fifth member, Hassan (Arsher Ali), after witnessing him pretending to commit a suicide bombing at a conference. The training in Pakistan ends in disaster when Omar attempts to shoot down a US Air Force drone and accidentally destroys part of the training camp; the pair are forced to flee. However, Omar uses the experience to assert authority on his return to Britain.

The group disagrees about what the target should be. Barry wants to bomb a local mosque as a false flag operation to "radicalise the moderates". At the same time, Faisal suggests blowing up a Boots pharmacy because it sells contraceptives and tampons. Omar's conservative but pacifist brother visits him and tries to talk him out of doing anything violent; however, Omar and his wife mock him for keeping his wife in a small room and squirt him with water pistols, making him flee.

After the group begins production of the explosives, Hassan is left alone to watch the safe house as Barry takes Waj and Faisal out to a field for a test detonation of a small amount of TATP contained in Omar's microwave, using a nearby fireworks show to cover the sound. When they return, they find Hassan dancing with an oblivious neighbour (Julia Davis). The group suspects they have been compromised and transport their volatile explosives to a new location in grocery bags. Faisal trips up while crossing a field and is killed in the explosion. This angers Omar, who berates the others and leaves. Faisal's head is found, tipping off the authorities, and Omar visits the others to tell them. They reconcile, and Omar decides to target the upcoming London Marathon due to having access to mascot costumes, which they use to conceal the bombs. Meanwhile, armed police raid Omar's brother's house.

The group drives to London in their costumes to prepare for the attack. Waj expresses doubts about the morality of their plot, but Omar convinces him to go through with it. A police officer approaches the group but is satisfied and leaves after a brief conversation. Hassan loses his nerve and tries to alert the officer but is killed when Barry detonates his bomb remotely. The remaining three panic and run away, and the police search for them.

Omar has a change of heart, feeling guilt about manipulating the easily led Waj into dying for a cause he does not understand and attempts to prevent the attack. Two police snipers receive Omar's description, and one of them shoots at him as he tries to blend in with the runners but mistakenly kills a bystander in a Wookiee costume instead. Waj is cornered by police in a kebab shop and takes the staff hostage. Omar contacts Waj from his mobile phone and convinces him to let all but one of the hostages go. Barry finds Omar during the phone call, snatches the phone, and swallows the SIM card. However, as Barry begins to choke, a well-meaning passer-by attempts to perform the Heimlich manoeuvre, forcing Omar to flee before Barry's bombs are inadvertently detonated.

Omar hurries to a nearby mobile phone store to buy a new SIM card to contact Waj but leaves empty-handed due to the frustratingly slow employees and convoluted signup process. He spots a colleague (Craig Parkinson) and borrows his phone. He attempts to talk Waj down, but his call is interrupted when the police charge in and kill the remaining hostage, whom they mistake for Waj. Confused, Waj detonates his bomb, killing everyone in the kebab shop.

Distraught, Omar walks into a nearby Boots pharmacy and detonates his bomb. In an epilogue, it is revealed that the police later arrested Omar's innocent brother as a terrorist; that they deflect responsibility for shooting the hostage and bystander; and that Omar unknowingly killed Osama bin Laden when misfiring his rocket in Pakistan.

