Eleven-year-old Greg Heffley is apprehensive about beginning middle school. On his first day, he quickly discovers the ups and downs, such as the missing stall doors in the boys' bathroom and the difficulties of obtaining a seat during lunch. During P.E., Greg and his best friend, Rowley Jefferson, escape from a game of Gladiator and learn from their friend, Chirag Gupta, about a moldy piece of cheese on the basketball court that makes anyone who touches it an outcast and that the only way to get rid of what is known as "the Cheese Touch" is to pass it on to someone else. They also meet Angie Steadman, a 7th-grader who isolates herself from the other students to "survive". Greg states his intention of becoming the most popular student in school, as well as earning a place in the school yearbook as a class favorite, only for several of his attempts to fail. 

On Halloween, when Greg and Rowley go out trick-or-treating, a group of teenage boys drive by in a pickup truck and spray a fire extinguisher at them. When Greg threatens to call the police, the boys chase him and Rowley to Greg's grandmother's house, but the latter two escape them after Greg accidentally damages their truck.

The boys join Safety Patrol in an effort to become popular and try out for a contest that offers a student a chance to become the cartoonist for the school paper. When Greg accidentally breaks Rowley's arm, during a dangerous game the two invented, Rowley becomes extremely popular and wins the cartoonist contest, making Greg envious of him. During a Safety Patrol assignment, Greg walks kindergartners down a neighborhood street without Rowley, but panics when he encounters a truck identical to the teenagers' from Halloween and hides the kids in a construction zone. He is then spotted by a neighbor who mistakes him for Rowley, having borrowed Rowley's coat. So, he abandons the kindergarteners and flees. To his bewilderment, Rowley is suspended from Safety Patrol, but Greg eventually confesses to Rowley that he was the one that was responsible. Distraught at Greg's mistreatment of him, Rowley ends their friendship. Once the teacher in charge of Safety Patrol learns it was actually Greg who hid the kindergartners, Greg is fired from the service while Rowley is reinstated as captain and befriends their classmate, Collin, who replaces Greg as Rowley's best friend. Greg attempts to pursue popularity without Rowley, but those efforts also fail. 

One day at recess, Greg and Rowley loudly confront each other and a circle of students encourages them to fight. However, neither of them are good at fighting. The teenagers from Halloween arrive at the scene and force Rowley to eat part of the cheese after the other kids, except for Greg, are chased inside the school. They flee the scene when the school's P.E. teacher, Coach Malone, arrives, but when the other kids come back out and notice the cheese has been eaten, Greg takes the blame to save Rowley's reputation, mending their friendship. At the end of the school year, Greg and Rowley make the yearbook class favorites page as "Cutest Friends".

