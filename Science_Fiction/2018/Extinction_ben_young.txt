Peter, an engineer, has recurring nightmares in which he and everyone he knows suffer through violent, alien invasion-like confrontations with an unknown enemy. This causes him to have a strained relationship with his wife, Alice, and his daughters Hanna and Lucy. He reluctantly visits a clinic to receive psychiatric help, only to find a patient there who reveals that he is having the same visions, and that the psychiatric 'help' would only suppress these visions. This prompts Peter to believe his visions are of an upcoming invasion.

That night, invading spaceships open fire on the city, causing significant damage. Peter and Alice barricade their apartment amid the sounds of slaughter from ground troops. An armored alien soldier breaks through the barricade and finds Lucy hiding under a table. The soldier pauses to examine the girl, which allows Peter and Alice to immobilize the soldier. Peter, now armed with the soldier's weapon, leads his family out of the building.

Based on his visions, Peter and his family agree to seek shelter at the factory where Peter works. He is able to bypass the rifle's biometric authentication and kill the soldiers guarding the apartment building's exit. They make their way to a tunnel entrance to safely travel to the factory, but not before Alice is injured from a bomb blast. As they regroup, the soldier from their apartment appears, having tracked them with a homing signal on the rifle Peter took. To Peter's shock, the soldier removes his helmet and appears human. Peter forces the soldier to carry Alice to the factory. There, his boss David explains that the invasion has been expected for many years. A medic examines Alice but informs Peter that he cannot save her. As David's men drag the invading soldier off to execute him, he yells to Peter that he can save Alice. Peter agrees to stay with the soldier to save Alice. David will evacuate their children to a subway station where a transport train awaits to take them all to an offsite base.

The soldier surprises Peter by revealing that Alice is a synthetic (AI). To save Alice, she needs an alternate source of power: Peter himself. At the soldier's guidance, Peter cuts open his own chest with a pocket knife, confirming that he is also a synthetic. The soldier connects a cable between the two synthetics and Peter passes out, experiencing in detail what he had thought were visions of the future, but are actually memories of a past war; fearing that android workers ("synthetics") might rise up against humans, the military attacked unarmed synthetics. The synthetics fought back and eventually drove all humans off the planet. Peter and Alice met during the tension, and while fighting the humans, they found Hanna and Lucy, who are also synthetics. To deal with the guilt of what they have done and prevent themselves from living in fear of a reprisal from humans, most synthetics (including Peter and his family) wiped their memories and lived as humans, unaware of their nature or history.

Peter wakes up and the soldier, Miles, explains that humans have been living on Mars for 50 years. He had expected the synths to be monsters, not families with children, and after getting a good look at Lucy under the table, decided that he could not kill anyone. Peter and Alice part amicably with Miles to find their daughters as the humans breach the roof of the factory. As they all depart on the train, David explains that he and a handful of other synthetics kept their memories to stay prepared for the inevitable return of the humans. Peter suggests that some day there could be peace between humans and synthetics.

