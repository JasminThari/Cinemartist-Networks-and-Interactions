Office worker Marc scavenges for food in a downtown Barcelona building that has been ravaged by a catastrophic event. Directed to the basement to help dig a tunnel, he almost causes its collapse as he panics over the fate of his girlfriend Julia, who was staying at his apartment at the time of the catastrophe. When they break through to a neighboring building, he meets his former boss Enrique, who tells Marc that they can talk later. A flashback reveals that Marc, working as a computer engineer, faced possible termination by Enrique. Afraid of losing his job, Marc resists Julia's desire to have children. The following morning, Marc watches a video of a boy who dies from suicide because his father could not understand or believe in his acute agoraphobia.

In the present, three months after the unspecified event, Marc and Enrique discuss leaving the building together. Enrique, who has a working GPS device, requests that Marc not tell the others about it; Marc reveals that he has stolen supplies formerly owned by Rovira, a dead coworker. Enrique is initially dismissive of Marc's scavenged supplies and declines to partner with him, but Marc blackmails Enrique into helping him search for Julia. The two set out into the subway system, where a young pickpocket steals the GPS device. After a chase and fight over his possessions, Enrique kills Javier, the pickpocket's brother after the power goes out. Although worried that Enrique will continue without him, Marc is relieved to find that Enrique is willing to continue their partnership.

Another flashback shows that Marc's neighbor has not left the building for months. At work, Rovira, revealed to have been covertly living in the office, is forced to leave. Once thrown out, he convulses; when dragged back in, the convulsions end, but he still dies from the trauma. Discussing these strange events at home with Julia, Marc notices that increasing numbers of people are refusing to leave their homes. In the present, Marc grows frustrated with Enrique's refusal to reveal why he wants to go to the Olympic city with a bag full of seeds. When they believe they have reached Marc's apartment building, they blast their way in with explosives. There, they learn that Julia, now pregnant, is not in the building.

Flashbacks depict a growing trend of agoraphobia called "the Panic", a disease of unknown origin that kills anyone who goes outside through convulsion. Julia and Marc fight again over whether to have children, and Julia accuses Marc of using the Panic as an excuse to avoid it. After Marc leaves for work, Julia refuses to speak to him, and he becomes stranded in the office building when he suddenly becomes agoraphobic. In the present, Enrique tells Marc that since they have reached his apartment building, he will no longer accompany Marc. Enrique reveals that he is attempting to reach the hospital where his comatose father is at, which prompts the two to reconcile somewhat. At a church, a bear nearly mauls Enrique to death, but Marc manages to kill it. While the two eat the bear, they bond over their pasts and fears.

A group of survivors inform Enrique that the hospital burnt down; since his father was in a coma, it is unlikely that he survived. Enrique falls into a deep depression and gives Marc his seeds, telling him to find Julia and save the baby. On his own, Marc ends up in a shopping center where Julia worked. He looks in the supermarket and finds a band of survivors, but they are raided by another group. He finds Julia's coworker, Andrea, but she is killed by debris. Marc is attacked by a man with a knife, but Enrique saves him but is severely wounded in the process, which he hides. Marc notices Julia in the opposite building. Overjoyed, he returns to tell Enrique and discovers his wounds. Urged by Enrique's dying wish, Marc crosses the street to be with Julia, though it nearly kills him.

Several months later, Julia gives birth, and they use the seeds to create a greenhouse. Over time, the child grows and is shown able to leave the building without suffering from the Panic. As this happens, he is part of a new generation of humanity that is naturally immune to the Panic. In the end, Marc and Julia watch him leave with several other youths to rebuild civilization.

