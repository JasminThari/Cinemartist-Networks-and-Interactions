Bilbo and the Dwarves watch from the Lonely Mountain as the dragon Smaug sets Laketown ablaze. Bard breaks out of prison and kills Smaug with the black arrow. Smaug's falling body crushes the Master of Laketown and his cronies, who were escaping on a boat with the town's gold. Bard becomes the new leader of Laketown and guides its people to seek refuge in the ruins of Dale. Thorin, now possessing the vast treasure in the mountain, searches obsessively for the Arkenstone, which Bilbo had previously found but kept hidden. Upon hearing that Laketown survivors have fled to Dale, he orders the entrance of the Lonely Mountain sealed off.

Meanwhile, Galadriel, Elrond, and Saruman arrive at Dol Guldur and free Gandalf, sending him to safety with Radagast. They battle and defeat the Nazgûl and then face a formless Sauron himself. Galadriel defeats him in a duel of wills and banishes him and his forces to the East. Azog, marching on Erebor with his vast Orc army, sends his son Bolg to Mount Gundabad to summon their second army. Legolas and Tauriel witness the march of Bolg's army, bolstered by Orc berserkers and giant bats.

Thranduil and an Elf army arrive in Dale to reclaim a treasure once withheld from them by the Dwarf king Thrór. Bard asks Thorin for the share of gold previously promised to the people of Laketown, but Thorin refuses. Gandalf arrives at Dale to warn Bard and Thranduil of Azog, but Thranduil dismisses him. Bilbo sneaks the Arkenstone out of Erebor and gives it to Thranduil and Bard so that they can trade it for the promised treasures and prevent a war. Thorin angrily refuses the proposal, while Bilbo chides him for letting greed cloud his judgement. Thorin nearly kills Bilbo but is stopped by Gandalf. Thorin's cousin Dáin arrives with his Dwarf army, and a battle of Dwarves against Elves and Men almost ensues, until Azog's army arrives. The forces of Dáin, Thranduil and Bard, along with Gandalf and Bilbo, immediately band together against the Orcs. A second front is opened when the Orcs attack Dale, forcing Bard to withdraw his forces to defend the city.

Inside Erebor, Thorin suffers traumatic hallucinations of being swallowed up by gold before regaining his sanity and leading his company to join the battle. He rides with Dwalin, Fíli, and Kíli to kill Azog. Meanwhile, Tauriel and Legolas arrive to warn the Dwarves of Bolg's arrival, and Bilbo volunteers to relay the news to Thorin, using his magic ring to move through the combat unseen. Azog kills Fíli as Bilbo and the other Dwarves are forced to watch. Bolg overpowers Tauriel and then kills Kíli, who had come to her aid. Legolas battles Bolg and eventually kills him. The Great Eagles arrive with Radagast and Beorn, and the Orcs are finally defeated. In the climax, Thorin engages Azog in a duel and kills him, but is fatally wounded in the process. Bilbo makes peace with the dying Thorin, while Tauriel mourns Kili. Thranduil advises Legolas to seek out a Dunedain ranger in the north who goes by the name Strider. Thorin is buried with the Arkenstone along with Kili and Fili, and Dáin is crowned king.

Thorin's company settles back into Erebor, and Dale begins to rebuild with Bard as the leader. Bilbo bids farewell to the company's remaining members and journeys home to the Shire with Gandalf. As the two part ways on the outskirts of the Shire, Gandalf admits his knowledge of Bilbo's ring and warns him of it, although Bilbo assures him that he had lost the ring. Bilbo returns to Bag End to find his belongings being auctioned off because he was presumed dead. He stops the sale and starts tidying up his home, revealing he still possesses the ring. Sixty years later,{{Efn|During the events of ''The Lord of the Rings: The Fellowship of the Ring'' (2001).}} Bilbo receives a visit from Gandalf on his 111th birthday.

